-- MySQL Script generated by MySQL Workbench
-- Sun Apr 29 22:20:41 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema QLLK
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema QLLK
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `database-qllk` DEFAULT CHARACTER SET utf8 ;
USE `database-qllk` ;

-- -----------------------------------------------------
-- Table `QLLK`.`KHACHHANG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`KHACHHANG` (
  `KHID` VARCHAR(4) NOT NULL,
  `TENKH` NVARCHAR(50) NULL,
  `DIACHI` NVARCHAR(50) NULL,
  `email` VARCHAR(255) NULL,
  `SODIENTHOAI` VARCHAR(13) NULL,
  PRIMARY KEY (`KHID`));


-- -----------------------------------------------------
-- Table `QLLK`.`PHONGBAN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`PHONGBAN` (
  `PBID` VARCHAR(4) NOT NULL,
  `TENPB` NVARCHAR(45) NULL,
  PRIMARY KEY (`PBID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`NHANVIEN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`NHANVIEN` (
  `NVID` VARCHAR(6) NOT NULL,
  `TENNV` VARCHAR(45) NULL,
  `PBID` VARCHAR(4) NULL,
  `PHAI` VARCHAR(3) NULL,
  `PHONGBAN_PBID` VARCHAR(4) NOT NULL,
  `DANGNHAP_NVID` VARCHAR(6) NOT NULL,
  PRIMARY KEY (`NVID`, `PHONGBAN_PBID`, `DANGNHAP_NVID`),
  INDEX `fk_NHANVIEN_PHONGBAN1_idx` (`PHONGBAN_PBID` ASC),
  CONSTRAINT `fk_NHANVIEN_PHONGBAN1`
    FOREIGN KEY (`PHONGBAN_PBID`)
    REFERENCES `QLLK`.`PHONGBAN` (`PBID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`HOADON`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`HOADON` (
  `HDID` VARCHAR(4) NOT NULL,
  `KHID` VARCHAR(4) NULL,
  `NGAYLAP` DATE NULL,
  `NVID` VARCHAR(4) NULL,
  `MASOTHUE` VARCHAR(15) NULL,
  `SOTIENTT` VARCHAR(12) NULL,
  `KHACHHANG_KHID` VARCHAR(4) NOT NULL,
  `NHANVIEN_NVID` VARCHAR(6) NOT NULL,
  `NHANVIEN_PHONGBAN_PBID` VARCHAR(4) NOT NULL,
  PRIMARY KEY (`HDID`, `KHACHHANG_KHID`, `NHANVIEN_NVID`, `NHANVIEN_PHONGBAN_PBID`),
  INDEX `fk_HOADON_KHACHHANG1_idx` (`KHACHHANG_KHID` ASC),
  INDEX `fk_HOADON_NHANVIEN1_idx` (`NHANVIEN_NVID` ASC, `NHANVIEN_PHONGBAN_PBID` ASC),
  CONSTRAINT `fk_HOADON_KHACHHANG1`
    FOREIGN KEY (`KHACHHANG_KHID`)
    REFERENCES `QLLK`.`KHACHHANG` (`KHID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_HOADON_NHANVIEN1`
    FOREIGN KEY (`NHANVIEN_NVID` , `NHANVIEN_PHONGBAN_PBID`)
    REFERENCES `QLLK`.`NHANVIEN` (`NVID` , `PHONGBAN_PBID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`LOAIMATHANG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`LOAIMATHANG` (
  `LOAIID` VARCHAR(8) NOT NULL,
  `TENLOAI` NVARCHAR(45) NULL,
  PRIMARY KEY (`LOAIID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`HANGTONKHO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`HANGTONKHO` (
  `KHUID` VARCHAR(5) NOT NULL,
  `MHID` VARCHAR(4) NULL,
  `SOLUONGTON` INT NULL,
  PRIMARY KEY (`KHUID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`MATHANG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`MATHANG` (
  `MHID` VARCHAR(4) NOT NULL,
  `LOAIID` VARCHAR(8) NULL,
  `TENHANG` NVARCHAR(45) NULL,
  `DONVITINH` NVARCHAR(10) NULL,
  `DONGIA` NVARCHAR(12) NULL,
  `HANGSX` VARCHAR(20) NULL,
  `TGBAOHANH` NVARCHAR(15) NULL,
  `HINHMH` VARCHAR(45) NULL,
  `LOAIMATHANG_LOAIID` VARCHAR(8) NOT NULL,
  `HANGTONKHO_KHUID` VARCHAR(5) NOT NULL,
  PRIMARY KEY (`MHID`, `LOAIMATHANG_LOAIID`, `HANGTONKHO_KHUID`),
  INDEX `fk_MATHANG_LOAIMATHANG1_idx` (`LOAIMATHANG_LOAIID` ASC),
  INDEX `fk_MATHANG_HANGTONKHO1_idx` (`HANGTONKHO_KHUID` ASC),
  CONSTRAINT `fk_MATHANG_LOAIMATHANG1`
    FOREIGN KEY (`LOAIMATHANG_LOAIID`)
    REFERENCES `QLLK`.`LOAIMATHANG` (`LOAIID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MATHANG_HANGTONKHO1`
    FOREIGN KEY (`HANGTONKHO_KHUID`)
    REFERENCES `QLLK`.`HANGTONKHO` (`KHUID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`CHITIETHOADON`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`CHITIETHOADON` (
  `HDID` VARCHAR(4) NOT NULL,
  `MHID` VARCHAR(4) NOT NULL,
  `DONGIABAN` VARCHAR(12) NULL,
  `SOLUONG` INT NULL,
  `HOADON_HDID` VARCHAR(4) NOT NULL,
  `MATHANG_MHID` VARCHAR(4) NOT NULL,
  PRIMARY KEY (`HDID`, `MHID`, `HOADON_HDID`, `MATHANG_MHID`),
  INDEX `fk_BANHANG_HOADON_idx` (`HOADON_HDID` ASC),
  INDEX `fk_BANHANG_MATHANG1_idx` (`MATHANG_MHID` ASC),
  CONSTRAINT `fk_BANHANG_HOADON`
    FOREIGN KEY (`HOADON_HDID`)
    REFERENCES `QLLK`.`HOADON` (`HDID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_BANHANG_MATHANG1`
    FOREIGN KEY (`MATHANG_MHID`)
    REFERENCES `QLLK`.`MATHANG` (`MHID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`NHACUNGCAP`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`NHACUNGCAP` (
  `NCCID` VARCHAR(5) NOT NULL,
  `TENNCC` NVARCHAR(50) NULL,
  `DIACHINCC` NVARCHAR(50) NULL,
  `EMAILNCC` VARCHAR(45) NULL,
  `SODIENTHOAINCC` VARCHAR(45) NULL,
  PRIMARY KEY (`NCCID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`DONDATHANG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`DONDATHANG` (
  `DDHID` VARCHAR(4) NOT NULL,
  `NGAYLAP` DATE NULL,
  `NVID` VARCHAR(6) NULL,
  `NCCID` VARCHAR(5) NULL,
  `NHACUNGCAP_NCCID` VARCHAR(5) NOT NULL,
  PRIMARY KEY (`DDHID`, `NHACUNGCAP_NCCID`),
  INDEX `fk_DONHANG_NHACUNGCAP1_idx` (`NHACUNGCAP_NCCID` ASC),
  CONSTRAINT `fk_DONHANG_NHACUNGCAP1`
    FOREIGN KEY (`NHACUNGCAP_NCCID`)
    REFERENCES `QLLK`.`NHACUNGCAP` (`NCCID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`CHITIETDONDATHANG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`CHITIETDONDATHANG` (
  `DDHID` VARCHAR(4) NOT NULL,
  `MHID` VARCHAR(4) NOT NULL,
  `SOLUONG` INT NULL,
  `DONGIA` NVARCHAR(12) NULL,
  `DONHANG_DONHANGID` VARCHAR(4) NOT NULL,
  `MATHANG_MHID` VARCHAR(4) NOT NULL,
  PRIMARY KEY (`DDHID`, `MHID`, `DONHANG_DONHANGID`, `MATHANG_MHID`),
  INDEX `fk_DATHANG_DONHANG1_idx` (`DONHANG_DONHANGID` ASC),
  INDEX `fk_DATHANG_MATHANG1_idx` (`MATHANG_MHID` ASC),
  CONSTRAINT `fk_DATHANG_DONHANG1`
    FOREIGN KEY (`DONHANG_DONHANGID`)
    REFERENCES `QLLK`.`DONDATHANG` (`DDHID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DATHANG_MATHANG1`
    FOREIGN KEY (`MATHANG_MHID`)
    REFERENCES `QLLK`.`MATHANG` (`MHID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QLLK`.`PHIEUBAOHANH`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database-qllk`.`PHIEUBAOHANH` (
  `PBHID` VARCHAR(6) NOT NULL,
  `HDID` VARCHAR(4) NULL,
  `MHID` VARCHAR(4) NULL,
  `GHICHU` NVARCHAR(100) NULL,
  `NGAYLAPPBH` DATETIME NULL,
  `HOADON_HDID` VARCHAR(4) NOT NULL,
  `HOADON_KHACHHANG_KHID` VARCHAR(4) NOT NULL,
  `HOADON_NHANVIEN_NVID` VARCHAR(6) NOT NULL,
  `HOADON_NHANVIEN_PHONGBAN_PBID` VARCHAR(4) NOT NULL,
  `MATHANG_MHID` VARCHAR(4) NOT NULL,
  `MATHANG_LOAIMATHANG_LOAIID` VARCHAR(8) NOT NULL,
  PRIMARY KEY (`PBHID`, `HOADON_HDID`, `HOADON_KHACHHANG_KHID`, `HOADON_NHANVIEN_NVID`, `HOADON_NHANVIEN_PHONGBAN_PBID`, `MATHANG_MHID`, `MATHANG_LOAIMATHANG_LOAIID`),
  INDEX `fk_PHIEUBAOHANH_HOADON1_idx` (`HOADON_HDID` ASC, `HOADON_KHACHHANG_KHID` ASC, `HOADON_NHANVIEN_NVID` ASC, `HOADON_NHANVIEN_PHONGBAN_PBID` ASC),
  INDEX `fk_PHIEUBAOHANH_MATHANG1_idx` (`MATHANG_MHID` ASC, `MATHANG_LOAIMATHANG_LOAIID` ASC),
  CONSTRAINT `fk_PHIEUBAOHANH_HOADON1`
    FOREIGN KEY (`HOADON_HDID` , `HOADON_KHACHHANG_KHID` , `HOADON_NHANVIEN_NVID` , `HOADON_NHANVIEN_PHONGBAN_PBID`)
    REFERENCES `QLLK`.`HOADON` (`HDID` , `KHACHHANG_KHID` , `NHANVIEN_NVID` , `NHANVIEN_PHONGBAN_PBID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PHIEUBAOHANH_MATHANG1`
    FOREIGN KEY (`MATHANG_MHID` , `MATHANG_LOAIMATHANG_LOAIID`)
    REFERENCES `QLLK`.`MATHANG` (`MHID` , `LOAIMATHANG_LOAIID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
